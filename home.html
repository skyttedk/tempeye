<!DOCTYPE html>
<html>


<!-- TODO:
      hydrometer, hund i midten
      vise tidsstempel på måling
      hvis måling er meren end xx min gammel. skal der vises -- i metrene
      implementer temperatuer skalaer som jeg fandt

      paring af devices
         kunne vi skanne en qr kode for at få en device id?
         skal kunne slette device
         skal kune vise flere devices... in the future...

      setup menu...
        opsætnings menu, hvor man ændre infstillinger
          tilføje device
          slette devies
          angive hundetype pr. device
          

    unersøg:

      kan en pwa vibrere ?? eller lave lyd ??
      skal vi have en sms hvis der er for varms.


-->
<!-- references 

    TO PUSH: git push heroku master
    ABKY
    API KEY xyojOQ.rayVcQ:S0AJDREybgNnOC3kzGJLKxzZo6DBgoCU_6WMhhjRtjk

    
    gauge component
    https://github.com/Mictronics/GaugeMeter

    data table ranges
    https://www.dailypaws.com/dogs-puppies/dog-safety-tips/how-hot-is-too-hot-for-dogs

    icons
    https://pngtree.com/freepng/dog-care-silhouette-head-healthy-pet-mono-line-logo-design_4996067.html


    noget fra heroku
    https://elements.heroku.com/addons/cloudmqtt
    https://devcenter.heroku.com/articles/cloudmqtt

    //demo example https://www.emqx.com/en/blog/how-to-use-mqtt-in-nodejs
    
    //panel
    https://api.cloudmqtt.com/console/82665378/details

-->

<head>

    <title>tempeye</title>
    <meta name="description" content="A tiny but potent erp system">
    <meta name="keywords" content="erp,tiny">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#a9a9a9">
    <link rel="manifest" href="manifest.json">
    <script type="text/javascript" src="https://code.jquery.com/jquery-latest.min.js"></script>
    <script type="text/javascript" src="/js/GaugeMeter.js"></script>
    <script src="https://cdn.ably.com/lib/ably.min-1.js"></script>

    <link rel="stylesheet" type="text/css" href="/css/GaugeMeter.css">

    <script>
        if (!navigator.serviceWorker.controller) {
            navigator.serviceWorker.register("/sw.js").then(function(reg) {
                console.log("Service worker has been registered for scope: " + reg.scope);
            });
        }
    </script>


    <script>
        //Ably setup
        const channelId = 'f1e82afb-f24e-46ae-af7d-14b70afe4e8c';
        const APIKEY = 'xyojOQ.rayVcQ:S0AJDREybgNnOC3kzGJLKxzZo6DBgoCU_6WMhhjRtjk';
        const deviceId = 'ddd307a5-4bea-4545-af8e-3c685d5396e6';



        const ably = new Ably.Realtime(APIKEY);
        ably.connection.on('connected', () => {
            console.log("Ably connected");


            const channel = ably.channels.get(channelId);

            channel.subscribe(deviceId, (message) => {

                console.log(`Received a greeting message in realtime: ${JSON.stringify(message.data)}`);

                $(".GaugeMeter").gaugeMeter({
                    percent: message.data.temperature,
                });
            });

        });




        $(document).ready(function() {
            //$(".GaugeMeter").gaugeMeter({
            //    percent: 15
            //});
        });
    </script>

</head>

<body style="background-color: #3F76AA"></body>

<div class="GaugeMeter" id="GaugeMeter_1" data-width="10" data-size="200" data-append="&#176;" data-label_color="#FFFFFF" data-label="Dog is happy" data-theme="Green-Red" data-style="Semi" data-back="RGBa(0,0,0,.6)"></div>
<img src="/img/dog2.png" style="width: 200px; height: 200px;">



</html>